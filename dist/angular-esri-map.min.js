!function(e){"use strict";e.module("esri.map",[]),e.module("esri.map").factory("esriLoader",["$q",function(r){return function(i,t){var n=r.defer();return e.isString(i)?require([i],function(e){null!==t&&void 0!==t&&t(e),n.resolve(e)}):e.isArray(i)?require(i,function(){null!==t&&void 0!==t&&t.apply(this,arguments),n.resolve(arguments)}):n.reject("An Array<String> or String is required to load modules."),n.promise}}])}(angular),function(e){"use strict";e.module("esri.map").service("esriRegistry",["$q",function(e){var r={};return{_register:function(i,t){r[i]||(r[i]=e.defer());var n=r[i];return t.promise.then(function(e){return n.resolve(e),e},function(e){return n.reject(e),e}),function(){delete r[i]}},get:function(i){if(r[i])return r[i].promise;var t=e.defer();return r[i]=t,t.promise}}}])}(angular),function(e){"use strict";e.module("esri.map").directive("esriMap",["$q","$timeout","esriRegistry",function(r,i,t){return{restrict:"E",scope:{center:"=?",zoom:"=?",itemInfo:"=?",basemap:"@",load:"&",extentChange:"&"},compile:function(e,r){return e.removeAttr("id"),e.append("<div id="+r.id+"></div>"),function(){}},controller:["$scope","$element","$attrs",function(n,o,s){var a=r.defer();if(s.registerAs){var l=t._register(s.registerAs,a);n.$on("$destroy",l)}require(["esri/map","esri/arcgis/utils"],function(r,t){if(s.webmapId)t.createMap(s.webmapId,s.id).then(function(e){a.resolve(e.map);var r=e.map.geographicExtent.getCenter();n.center.lng=r.x,n.center.lat=r.y,n.zoom=e.map.getZoom(),n.itemInfo=e.itemInfo});else{var o={};if(s.extent?o.extent=n[s.extent]:(n.center.lng&&n.center.lat?o.center=[n.center.lng,n.center.lat]:n.center&&(o.center=n.center),n.zoom&&(o.zoom=n.zoom)),n.basemap&&(o.basemap=n.basemap),s.navigationMode){if("css-transforms"!==s.navigationMode&&"classic"!==s.navigationMode)throw new Error("navigationMode must be 'css-transforms' or 'classic'.");o.navigationMode=s.navigationMode}if(s.sliderOrientation){if("horizontal"!==s.sliderOrientation&&"vertical"!==s.sliderOrientation)throw new Error("sliderOrientation must be 'horizontal' or 'vertical'.");o.sliderOrientation=s.sliderOrientation}if(s.sliderPosition){var l=["top-left","top-right","bottom-left","bottom-right"];if(l.indexOf(s.sliderPosition)<0)throw new Error("sliderPosition must be in "+l);o.sliderPosition=s.sliderPosition}if(s.sliderStyle){if("large"!==s.sliderStyle&&"small"!==s.sliderStyle)throw new Error("sliderStyle must be 'large' or 'small'.");o.sliderStyle=s.sliderStyle}var u=["autoResize","displayGraphicsOnPan","fadeOnZoom","fitExtent","force3DTransforms","logo","nav","optimizePanAnimation","showAttribution","showInfoWindowOnClick","slider","smartNavigation","wrapAround180"];e.forEach(u,function(e){"undefined"!=typeof s[e]&&(o[e]="true"===s[e].toString())});var c=["attributionWidth","maxScale","maxZoom","minScale","minZoom","resizeDelay","scale"];e.forEach(c,function(e){s[e]&&(o[e]=s[e])});var f=new r(s.id,o);a.resolve(f)}a.promise.then(function(e){e.on("load",function(){s.load&&n.$apply(function(){n.load()(e)})}),n.$watch("basemap",function(r,i){e.loaded&&r!==i&&e.setBasemap(r)}),n.inUpdateCycle=!1,n.$watch(function(e){return[e.center.lng,e.center.lat,e.zoom].join(",")},function(r){n.inUpdateCycle||(r=r.split(","),""!==r[0]&&""!==r[1]&&""!==r[2]&&(n.inUpdateCycle=!0,e.centerAndZoom([r[0],r[1]],r[2]).then(function(){n.inUpdateCycle=!1})))}),e.on("extent-change",function(r){n.inUpdateCycle||(n.inUpdateCycle=!0,n.$apply(function(){var t=e.geographicExtent.getCenter();n.center.lng=t.x,n.center.lat=t.y,n.zoom=e.getZoom(),s.extentChange&&n.extentChange()(r),i(function(){n.inUpdateCycle=!1},0)}))}),n.$on("$destroy",function(){e.destroy()})})}),this.getMap=function(){return a.promise},this.addLayer=function(e){return this.getMap().then(function(r){return r.addLayer(e)})},this.addLayerInfo=function(e){this.layerInfos?this.layerInfos.push(e):this.layerInfos=[e]},this.getLayerInfos=function(){return this.layerInfos}}]}}])}(angular),function(e){"use strict";e.module("esri.map").directive("esriGraphicsLayer",["$q",function(e){return{restrict:"E",require:["esriGraphicsLayer","^esriMap"],replace:!0,controller:["$scope","$element","$attrs",function(r,i,t){var n=e.defer();require(["esri/layers/GraphicsLayer"],function(e){var r=new e({id:t.id});n.resolve(r)}),this.getLayer=function(){return n.promise},this.setVisible=function(r){var i=e.defer();return this.getLayer().then(function(e){r?e.show():e.hide(),i.resolve()}),i.promise}}],link:function(e,r,i,t){var n=t[0],o=t[1],s=i.visible||"true",a=e.$eval(s);n.setVisible(a),e.$watch(function(){return e.$eval(i.visible)},function(e,r){e!==r&&n.setVisible(e)}),n.getLayer().then(function(e){return o.addLayer(e),o.addLayerInfo({title:i.title||e.name,layer:e,defaultSymbol:i.defaultSymbol?JSON.parse(i.defaultSymbol):!0}),e})}}}])}(angular),function(e){"use strict";e.module("esri.map").directive("esriFeatureLayer",["$q",function(e){return{restrict:"E",require:["esriFeatureLayer","^esriMap"],replace:!0,controller:["$scope","$element","$attrs",function(r,i,t){var n=e.defer();require(["esri/layers/FeatureLayer"],function(e){var r=new e(t.url);n.resolve(r)}),this.getLayer=function(){return n.promise},this.setVisible=function(r){var i=e.defer();return this.getLayer().then(function(e){r?e.show():e.hide(),i.resolve()}),i.promise}}],link:function(e,r,i,t){var n=t[0],o=t[1],s=i.visible||"true",a=e.$eval(s);n.setVisible(a),e.$watch(function(){return e.$eval(i.visible)},function(e,r){e!==r&&n.setVisible(e)}),n.getLayer().then(function(e){return o.addLayer(e),o.addLayerInfo({title:i.title||e.name,layer:e,hideLayers:i.hideLayers?i.hideLayers.split(","):void 0,defaultSymbol:i.defaultSymbol?JSON.parse(i.defaultSymbol):!0}),e})}}}])}(angular),function(e){"use strict";e.module("esri.map").directive("esriSimpleRenderer",["$q",function(e){return{restrict:"E",require:["esriSimpleRenderer"],replace:!0,controller:function(){var r=e.defer();require(["esri/renderers/SimpleRenderer"],function(e){var i=new e;r.resolve(i)}),this.getRenderer=function(){return r.promise}},link:function(e,r,i,t){var n,o=["esriFeatureLayer","esriGraphicsLayer"],s=t[0];for(var a in o)if(n=r.parent().controller(o[a]))break;s.getRenderer().then(function(e){return n&&n.getLayer().then(function(r){r.setRenderer(e)}),e})}}}])}(angular),function(e){"use strict";e.module("esri.map").directive("esriSimpleFillSymbol",["$q",function(e){return{restrict:"E",require:["esriSimpleFillSymbol","^esriSimpleRenderer"],replace:!0,controller:["$scope","$element","$attrs",function(r,i,t){var n=e.defer();require(["esri/Color","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol"],function(e,r,i){var o=new i(t.style?t.style:"solid",new r(r.STYLE_SOLID,new e(t.lineColor?t.lineColor:"#000"),t.lineSize?t.lineSize:1),new e(t.color?t.color:"#F00"));n.resolve(o)}),this.getSymbol=function(){return n.promise}}],link:function(e,r,i,t){var n,o,s=["esriSimpleRenderer"],a=t[0];for(var l in s)if(n=s[l],o=r.parent().controller(n))break;a.getSymbol().then(function(e){return o&&o.getRenderer().then(function(r){r.symbol=e}),e})}}}])}(angular),function(e){"use strict";e.module("esri.map").directive("esriSimpleLineSymbol",["$q",function(e){return{restrict:"E",require:["esriSimpleLineSymbol","^esriSimpleRenderer"],replace:!0,controller:["$scope","$element","$attrs",function(r,i,t){var n=e.defer();require(["esri/Color","esri/symbols/SimpleLineSymbol"],function(e,r){var i=new r(t.style?t.style:"solid",new e(t.color?t.color:"#000"),t.size?t.size:1);n.resolve(i)}),this.getSymbol=function(){return n.promise}}],link:function(e,r,i,t){var n,o,s=["esriSimpleRenderer"],a=t[0];for(var l in s)if(n=s[l],o=r.parent().controller(n))break;a.getSymbol().then(function(e){return o&&o.getRenderer().then(function(r){r.symbol=e}),e})}}}])}(angular),function(e){"use strict";e.module("esri.map").directive("esriSimpleMarkerSymbol",["$q",function(e){return{restrict:"E",require:["esriSimpleMarkerSymbol","^esriSimpleRenderer"],replace:!0,controller:["$scope","$element","$attrs",function(r,i,t){var n=e.defer();require(["esri/Color","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleMarkerSymbol"],function(e,r,i){var o=new i(t.style?t.style:"circle",t.size?t.size:10,new r(r.STYLE_SOLID,new e(t.lineColor?t.lineColor:"#000"),t.lineSize?t.lineSize:1),new e(t.color?t.color:"#F00"));n.resolve(o)}),this.getSymbol=function(){return n.promise}}],link:function(e,r,i,t){var n,o,s=["esriSimpleRenderer"],a=t[0];for(var l in s)if(n=s[l],o=r.parent().controller(n))break;a.getSymbol().then(function(e){return o&&o.getRenderer().then(function(r){r.symbol=e}),e})}}}])}(angular),function(e){"use strict";e.module("esri.map").directive("esriLegend",["$document","$q",function(r,i){return{priority:-10,scope:{},replace:!0,require:["^esriMap"],link:function(r,t,n,o){var s=o[0],a=n.targetId||n.id,l=i.defer();require(["esri/dijit/Legend","dijit/registry"],function(i,t){s.getMap().then(function(n){var o={map:n},u=s.getLayerInfos();u&&(o.layerInfos=u);var c=t.byId(a);c&&c.destroyRecursive(),c=new i(o,a),c.startup(),r.layers=c.layers,e.forEach(r.layers,function(e,i){r.$watch("layers["+i+"].renderer",function(){c.refresh()})}),l.resolve(c)})})}}}])}(angular);